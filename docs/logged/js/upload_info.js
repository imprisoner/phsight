(()=>{"use strict";var e={386:()=>{function e(e,n){e&&$(`.${e}`).on("click",(function(e){e.stopPropagation(),$(`.${n}-menu`).show(),$("body").css("overflow-y","hidden"),$(`.${n}-menu`).on("click",(function(e){e.stopPropagation()})),$(document).one("keydown",(function(e){"Escape"===e.code&&($(`.${n}-menu`).hide(),$("body").css("overflow-y",""))})),$(`.${n}-close`).one("click",(function(e){$(`.${n}-menu`).hide(),$("body").css("overflow-y","")}))})),"burger"===n&&o(n)}function o(e=""){$(`.${e}-search-btn`).on("click",(function(o){console.log("here");const n=$(this),t=$(`.${e}-search-field`),a=n.closest("form");if(!a.hasClass("active")){function i(e){e.stopPropagation(),a.trigger("submit")}a.addClass("active"),t.trigger("focus"),n.on("click",i),t.on("click",(function(e){e.stopPropagation()})),a.on("click",(function(e){e.stopPropagation()})),$(document).on("keydown",(function(e){"Enter"===e.code&&a.trigger("submit"),"Escape"===e.code&&(a.removeClass("active"),t.trigger("blur").val(""),$(document).off(),n.off("click",i))})),$(document).on("click",(function(){a.removeClass("active"),t.trigger("blur").val(""),$(document).off(),n.off("click",i)}))}}))}$((function(){o("header"),function(e=""){const o=$(e);o.each((function(e){$(this).on("click",(function(e){o.removeClass("active"),$(this).addClass("active")}))}))}(".header-navlink"),e("header-menu-btn","burger"),window.innerWidth<1279&&e("header-user-logged","user"),o("burger"),window.innerWidth>1279&&$(".header-user-avatar").on("mouseenter",(function(){$(".user-menu").show(200),$(".user-menu").on("mouseleave",(function(){$(this).hide(200)}))}))})),$((function(){e("album-popup","add-album"),e("camera-popup","add-camera"),e("lens-popup","add-lens"),$("#camera_brand").on("change",(function(e){-1!==$(this).val()&&$(".add-camera-button").removeClass("disabled")})),$(".add-camera-button").on("click",(function(e){$(this).hasClass("disabled")&&(e.preventDefault(),e.stopPropagation())})),$("#lens_brand").on("change",(function(e){-1!==$(this).val()&&$(".add-lens-button").removeClass("disabled")})),$(".add-lens-button").on("click",(function(e){$(this).hasClass("disabled")&&(e.preventDefault(),e.stopPropagation())})),$("input#PhotoEditFormModel_exclude_from_ratings").length>0&&$("input#PhotoEditFormModel_exclude_from_ratings").on("click",(function(){$(this).prop("checked")?($(".quiz-sublist .checkbox").removeClass("disabled"),$("input#PhotoEditFormModel_anonymous").prop("disabled",!1),$("input#PhotoEditFormModel_disallow_recommendation").prop("disabled",!1)):($(".quiz-sublist .checkbox").addClass("disabled"),$("input#PhotoEditFormModel_anonymous").prop("disabled",!0).prop("checked",!1),$("input#PhotoEditFormModel_disallow_recommendation").prop("disabled",!0).prop("checked",!1)),console.log($('input[type="checkbox"]:checked').length)})),$(".album-select").on("click",(function(e){const o=$(this).find(".datalist"),n=$(this);$(document).trigger("click"),e.stopPropagation(),e.preventDefault(),n.toggleClass("active"),o.toggleClass("active"),o.toggle(),o.on("click",(function(e){e.stopPropagation()})),o.find(".option").each((function(){$(this).on("click",(function(e){$(this).addClass("checked")}))})),$(document).one("click",(function(e){const t=$(o).find(".option.checked").length;t>0&&n.find("span").text(1===t?"Выбрано 1 альбом":t<5?`Выбрано ${t} альбома`:`Выбрано ${t} альбомов`).css("color","#282828"),e.stopPropagation(),o.removeClass("active"),n.removeClass("active"),o.hide()}))})),function(e=[]){e.each((function(e){const o=$(this),n=$(this).closest("label"),t=o[0]===n[0]?$(this).find(".datalist"):$(this).next(".datalist"),a=t.find(".selected"),i=n.find("span");a.length>0&&(i.text(a.text()),o.val(a.data("value"))),n.on("click",(function(e){$(document).trigger("click"),e.stopPropagation(),e.preventDefault(),$(this).toggleClass("active"),t.hasClass("active")||(t.addClass("active"),t.show()),$(e.target).hasClass("option")&&(o.val(e.target.dataset.value),i.css("color",""),i.text(e.target.innerHTML),o.trigger("change"),t.removeClass("active"),n.removeClass("active"),t.hide()),$(document).one("click",(function(e){e.stopPropagation(),n.removeClass("active"),t.removeClass("active"),t.hide()}))}))}))}($(".selection")),$(".add-camera-menu").on("click",(function(e){$(document).trigger("click")})),$(".add-album-menu").on("click",(function(e){$(document).trigger("click")})),$(".add-lens-menu").on("click",(function(e){$(document).trigger("click")})),$("#create_set_button").on("click",(function(){$.ajax({type:"POST",url:"/my/ajaxCreateNewSet/",data:{"PhotoSet[caption]":$("#album_name").val()},dataType:"json"}).done((function(e){void 0!==e.id&&($("#album_name").val(""),$("#sets-list").append(`\n                <div class="option">\n                    <div class="checkbox">\n                        <input id="PhotoEditFormModel_set_id_${e.id}" value="${e.id}" type="checkbox" name="PhotoEditFormModel[set_id][]" checked />\n                        <label for="PhotoEditFormModel_set_id_${e.id}"></label>\n                    </div>\n                    <div class="content">\n                        <p class="subheader">${e.caption}</p>\n                    </div>\n                </div>\n                `))}))})),$("#camera_id").on("change",(function(){-1==$(this).val()&&$(".camera-popup").trigger("click")})),$("#lens_id").on("change",(function(){-1==$(this).val()&&$(".lens-popup").trigger("click")})),$("#camera_brand").on("change",(function(){$.getJSON("/ajax/getPhotoAccessoriesForBrand/",{id:$(this).val(),type:1},(function(e){$("#camera_model").val("empty"),$.each(e,(function(e,o){$("#camera_model").next(".datalist").append(`\n                        <div class="option" data-value=${o[0]}>\n                            ${o[1]}\n                        </div>\n                    `)}))}))})),$("#lens_brand").on("change",(function(){$.getJSON("/ajax/getPhotoAccessoriesForBrand/",{id:$(this).val(),type:2},(function(e){$("#lens_model").val("empty"),$.each(e,(function(e,o){$("#lens_model").next(".datalist").append(`\n                        <div class="option" data-value=${o[0]}>\n                            ${o[1]}\n                        </div>\n                    `)}))}))}))}))}},o={};function n(t){if(o[t])return o[t].exports;var a=o[t]={exports:{}};return e[t](a,a.exports,n),a.exports}n.m=e,n.x=e=>{},n.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{var e={650:0},o=[[386]],t=e=>{},a=(a,i)=>{for(var c,s,[l,d,r,u]=i,$=0,p=[];$<l.length;$++)s=l[$],n.o(e,s)&&e[s]&&p.push(e[s][0]),e[s]=0;for(c in d)n.o(d,c)&&(n.m[c]=d[c]);for(r&&r(n),a&&a(i);p.length;)p.shift()();return u&&o.push.apply(o,u),t()},i=self.webpackChunk=self.webpackChunk||[];function c(){for(var t,a=0;a<o.length;a++){for(var i=o[a],c=!0,s=1;s<i.length;s++){var l=i[s];0!==e[l]&&(c=!1)}c&&(o.splice(a--,1),t=n(n.s=i[0]))}return 0===o.length&&(n.x(),n.x=e=>{}),t}i.forEach(a.bind(null,0)),i.push=a.bind(null,i.push.bind(i));var s=n.x;n.x=()=>(n.x=s||(e=>{}),(t=c)())})(),n.x()})();